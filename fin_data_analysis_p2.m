% Kengroo.com, 2017 - % Author: Ashish Jagtiani (ashishvjagtiani@gmail.com)% Tutorial Series: Progamming in Octave%%% Octave Script scrapes data from the NASDAQ website% and prints current price% New from p1: Checks previous close value and todays high/low values% 52 week high/low, net change in price (relative and percent change)% This script simply checks for one stock when run%% Part 2 of financial data analysisclear;clc;close all;% Define the stock you want to checkticker=["AAPL"];%Based on the website link, use string concantation to define the web linkdata_link = cstrcat("http://www.nasdaq.com/symbol/",ticker,"/real-time");%Read the data, this pull all html datastockData_html=urlread(data_link);%%----------Find Current Stock price------------------------------------%%%Lets find the string associated with the price% This was determined based on the html of the page_output_immediately% and will change with website and data being querieddataPointer1=strfind(stockData_html,"quotes_content_left__LastSale");raw_filter_stockData1=stockData_html(1,dataPointer1(1):dataPointer1(1)+100);%Further filtering of data to locate the exact position of the stock pricedataPointer_low1=strfind(raw_filter_stockData1,">");dataPointer_high1=strfind(raw_filter_stockData1,"<");stockData_current=raw_filter_stockData1(dataPointer_low1+1:dataPointer_high1-1);%%----------Find Stock price for previous close--------------------------%%%Lets simply repeat the above filter to find previous closedataPointer2=strfind(stockData_html,"quotes_content_left__PreviousClose");raw_filter_stockData2=stockData_html(1,dataPointer2(1):dataPointer2(1)+100);%Further filtering of data to locate exact positiondataPointer_low2=strfind(raw_filter_stockData2,">");dataPointer_high2=strfind(raw_filter_stockData2,"<");stockData_previousClose=raw_filter_stockData2(dataPointer_low2+1:dataPointer_high2-1);%%----------Find Today's high stock price---------------------------------%%%Again, lets repeat the above filter for the time being to pull todays highdataPointer3=strfind(stockData_html,"quotes_content_left__TodaysHigh");raw_filter_stockData3=stockData_html(1,dataPointer3(1):dataPointer3(1)+100);%Further filtering of data to locate the exact position dataPointer_low3=strfind(raw_filter_stockData3,">");dataPointer_high3=strfind(raw_filter_stockData3,"<");stockData_todaysHigh=raw_filter_stockData3(dataPointer_low3+1:dataPointer_high3-1);%%----------Find Today's low stock price---------------------------------%%%Again, lets repeat the above filter for the time being to pull todays lowdataPointer4=strfind(stockData_html,"quotes_content_left__TodaysLow");raw_filter_stockData4=stockData_html(1,dataPointer4(1):dataPointer4(1)+100);%Further filtering of data to locate the exact position dataPointer_low4=strfind(raw_filter_stockData4,">");dataPointer_high4=strfind(raw_filter_stockData4,"<");stockData_todaysLow=raw_filter_stockData4(dataPointer_low4+1:dataPointer_high4-1);%%----------Find 52 week high stock price---------------------------------%%%Again, lets repeat the above filter for the time being to pull 52week highdataPointer5=strfind(stockData_html,"quotes_content_left__52WeekHigh");raw_filter_stockData5=stockData_html(1,dataPointer5(1):dataPointer5(1)+100);%Further filtering of data to locate the exact position dataPointer_low5=strfind(raw_filter_stockData5,">");dataPointer_high5=strfind(raw_filter_stockData5,"<");stockData_52weekHigh=raw_filter_stockData5(dataPointer_low5+2:dataPointer_high5-1);%%----------Find 52 week low stock price---------------------------------%%%Again, lets repeat the above filter for the time being to pull 52week lowdataPointer6=strfind(stockData_html,"quotes_content_left__52WeekLow");raw_filter_stockData6=stockData_html(1,dataPointer6(1):dataPointer6(1)+100);%Further filtering of data to locate the exact position dataPointer_low6=strfind(raw_filter_stockData6,">");dataPointer_high6=strfind(raw_filter_stockData6,"<");stockData_52weekLow=raw_filter_stockData6(dataPointer_low6+2:dataPointer_high6-1);%%----Lets all pull in the header----------------------------------------%%dataPointer7=strfind(stockData_html,"h1");raw_filter_stockData7=stockData_html(1,dataPointer7(1):dataPointer7(1)+100);%Further filtering of data to locate the exact position of the HeaderdataPointer_low7=strfind(raw_filter_stockData7,">");dataPointer_high7=strfind(raw_filter_stockData7,"<");stockData_Header=raw_filter_stockData7(dataPointer_low7+1:dataPointer_high7-1);%%----------Find net change in stock price---------------------------------%%%Again, lets repeat the above filters for the net change in stock pricedataPointer8=strfind(stockData_html,"quotes_content_left__NetChange");raw_filter_stockData8=stockData_html(1,dataPointer8(1):dataPointer8(1)+100);%Further filtering of data to locate the exact position odataPointer_low8=strfind(raw_filter_stockData8,">");dataPointer_high8=strfind(raw_filter_stockData8,"<");stockData_netChange=raw_filter_stockData8(dataPointer_low8+1:dataPointer_high8-1);%%----------Check if net change is positive or negative--------------------%%%Again, lets repeat the above filters for the net change in stock pricedataPointer9=strfind(stockData_html,"_updownImage");raw_filter_stockData9=stockData_html(1,dataPointer9(1):dataPointer9(1)+100);%Further filtering of data to locate the exact position dataPointer_low9=strfind(raw_filter_stockData9,">");dataPointer_high9=strfind(raw_filter_stockData9,"<");stockData_netDirection=raw_filter_stockData9(dataPointer_low9+2:dataPointer_high9-1);if (stockData_netDirection =="#9660;")stockData_netDirection_sign="-";elsestockData_netDirection_sign="+";endif%%----------Find net percentage change in stock price----------------------%%%Again, lets repeat the above filters for the net % change in stock pricedataPointer10=strfind(stockData_html,"quotes_content_left__PctChange");raw_filter_stockData10=stockData_html(1,dataPointer10(1):dataPointer10(1)+100);%Further filtering of data to locate the exact positiondataPointer_low10=strfind(raw_filter_stockData10,">");dataPointer_high10=strfind(raw_filter_stockData10,"<");stockData_netPercentChange=raw_filter_stockData10(dataPointer_low10+1:dataPointer_high10-1);%%-----------Final printing----------------------------------------------%%%Getting local time and dateretrieve_time=strftime("%Y-%m-%d %H:%M:%S", localtime (time ()));%print the stock pricefprintf("%s\n",stockData_Header);fprintf("Stock price for %s on %s (local time)\n\n",ticker, retrieve_time);fprintf("Stock price = $%s \n",stockData_current);fprintf("Net Change %s%s\n",stockData_netDirection_sign, stockData_netChange);fprintf("Net Percent Change %s%s\n\n",stockData_netDirection_sign, stockData_netPercentChange);fprintf("Previous close = $%s\n\n",stockData_previousClose);fprintf("Today's High = $%s\n",stockData_todaysHigh);fprintf("Today's Low = $%s\n\n",stockData_todaysLow);fprintf("52 Week High = $%s\n",stockData_52weekHigh);fprintf("52 Week Low = $%s\n\n",stockData_52weekLow);